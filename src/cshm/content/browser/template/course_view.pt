<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    xmlns:v-on="http://vuejs.org"
    lang="en"
    metal:use-macro="context/main_template/macros/master"
    i18n:domain="cshm.content">
<body>
<metal:content-core fill-slot="content-core">
<metal:content-core define-macro="content-core"
                    tal:define="toc context/table_of_contents|nothing;">
<style>
td, th{
    font-size: 20px;
    text-align: center;
}
.documentFirstHeading{
    display: none;
}
</style>
<?python
import base64
?>
    <h1>${view/course_name}${view/period}</h1>
    <h2>開始時間: ${view/minDate}</h2>
    <h2>結束時間: ${view/maxDate}</h2>
    <h3 style='color: red'>
      回收率低於80%:
      <tal:cond condition="view/alertList">
        <tal:rep repeat="alert view/alertList">
          <a href="#${alert}">${alert}</a>/
        </tal:rep>
      </tal:cond>
      <tal:cond condition="not: view/alertList">
        尚未設定人數
      </tal:cond>
    </h3>

    <button class='context' onclick="location.href='course_listing'" style='margin: 20px 0'>返回列表</button>
    <button class='context' onclick="location.href='${view/editUrl}'" style='margin: 20px 0'>設定上課人數</button>

    <table>
      <tr tal:condition="view/QRcode">
        <th>
          <a href="${view/url}">${view/course_name}</a>
        </th>
      </tr>
      <tr tal:condition="view/QRcode">
        <td><img src="data:image/png;base64,${view/QRcode}" style="width:200px"/></td>
      </tr>
      <tr>
        <th colspan=2><a href="${view/url}">問卷網址</a></th>
      </tr>
      <tr >
        <td colspan=2>
          <img src="data:image/png;base64,${view/b64_img}" style="width:200px"/>
        </td>
      </tr>
    </table>

    <br/>
    <div tal:repeat="item view/data" id='${python: item[3]}'>
        日期：<span>${python:item[0]}</span><br>
        時間：<span>${python:item[1]}</span><br>
        星期：<span>${python:item[2]}</span><br>
        授課名稱：<span>${python:item[3]}</span><br>
        時數：<span>${python:item[4]}</span><br>
        講師：<span>${python:item[5]}</span><br>
        教室：<span>${python:item[7]}</span><br>
        <br>
        <p>已填座號：${python:item[8]}</p>
        <p>未填座號：${python: item[10]}</p>
        <p>填寫人數/總計數量： ${python: '%s/%s' %(item[11], view.numbers) if view.numbers else '尚未設定學生人數'}</p>
        <p>回收率: ${python: item[9]}</p>
        <hr/>
    </div>
</metal:content-core>
</metal:content-core>

</body>
</html>
